!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],e):e(t.RetroHitCounter={},t.React)}(this,function(t,e){"use strict";var n,o="default"in e?e.default:e,r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},i=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},a=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},c=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},s=function(t){var e=t.thickness,n=t.spacing,r=t.activeColor,a=t.inactiveColor,c=t.isActive,s=e/2,p=t.parentWidth-e;return o.createElement("div",{style:i({position:"absolute"},{a:{top:0,left:s},b:{top:s,left:p+e,transform:"rotate(90deg)",transformOrigin:"top left"},c:{top:s+p,left:p+e,transform:"rotate(90deg)",transformOrigin:"top left"},d:{bottom:0,left:s},e:{top:s+p,left:e,transform:"rotate(90deg)",transformOrigin:"top left"},f:{top:s,left:e,transform:"rotate(90deg)",transformOrigin:"top left"},g:{top:p,left:s}}[t.segmentId])},o.createElement("svg",{width:p,height:e,style:{display:"block"}},[a,r].map(function(t,i){return o.createElement("path",{key:i,fill:t,style:{opacity:t===r?c?1:0:1,transition:"opacity 250ms"},d:"\n              M "+n+" "+s+"\n              L "+(s+n)+" 0\n              L "+(p-s-n)+" 0\n              L "+(p-n)+" "+s+"\n              L "+(p-s-n)+" "+e+"\n              L "+(s+n)+" "+e+"\n            "})})))},p=((n={})[0]=["a","b","c","d","e","f"],n[1]=["b","c"],n[2]=["a","b","g","e","d"],n[3]=["a","b","g","c","d"],n[4]=["f","g","b","c"],n[5]=["a","f","g","c","d"],n[6]=["a","f","g","c","d","e"],n[7]=["a","b","c"],n[8]=["a","b","c","d","e","f","g"],n[9]=["a","b","c","d","f","g"],n),l=["a","b","c","d","e","f","g"],h=function(t){var e=t.value,n=t.width,r=t.height,i=t.segmentThickness,a=t.segmentSpacing,c=t.segmentActiveColor,h=t.segmentInactiveColor;return o.createElement("div",{style:d.wrapper(n,r)},l.map(function(t){return o.createElement(s,{key:t,segmentId:t,thickness:i,spacing:a,activeColor:c,inactiveColor:h,parentWidth:n,parentHeight:r,isActive:(l=t,d=e,-1!==p[d].indexOf(l))});var l,d}))},d={wrapper:function(t,e){return{position:"relative",width:t,height:e}}};function f(t,e,n,o){if("undefined"!=typeof window){n="number"==typeof n?n:t.width,o="number"==typeof o?o:t.height;var r=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1);r>1&&(t.style.height=o+"px",t.style.width=n+"px",t.width=n*r,t.height=o*r,e.scale(r,r))}}var u={outer:[{stop:0,color:"#394e6f"},{stop:.3,color:"#7695cc"},{stop:.6,color:"#b5c8f0"},{stop:.9,color:"#b5c4e1"},{stop:1,color:"#98a9cb"}],inner:[{stop:0,color:"#394e6f"},{stop:.15,color:"#546f8c"},{stop:.5,color:"#b5c8f0"},{stop:.8,color:"#c5d8f9"},{stop:1,color:"#7991bc"}]},g=[{gradientStops:u.outer,getGradientCoords:function(t){return[0,t.thickness,0,0]},getPoints:function(t){var e=t.width,n=t.thickness;return[[0,0],[n,n],[e-n,n],[e,0]]}},{gradientStops:u.outer,getGradientCoords:function(t){return[t.thickness,0,0,0]},getPoints:function(t){var e=t.height,n=t.thickness;return[[0,0],[n,n],[n,e-n],[0,e]]}},{gradientStops:u.inner,getGradientCoords:function(t){var e=t.width;return[e,0,e-t.thickness,0]},getPoints:function(t){var e=t.width,n=t.height,o=t.thickness;return[[e,0],[e-o,o],[e-o,n-o],[e,n]]}},{gradientStops:u.inner,getGradientCoords:function(t){var e=t.height;return[0,e,0,e-t.thickness]},getPoints:function(t){var e=t.width,n=t.height,o=t.thickness;return[[0,n],[o,n-o],[e-o,n-o],[e,n]]}}],v=function(t){function e(){var n,o;r(this,e);for(var i=arguments.length,a=Array(i),s=0;i>s;s++)a[s]=arguments[s];return n=o=c(this,t.call.apply(t,[this].concat(a))),o.handleRef=function(t){t&&(o.canvas=t,o.ctx=t.getContext("2d"),f(o.canvas,o.ctx))},o.draw=function(){var t=o.props,e=t.width,n=t.height,r=t.thickness;"number"==typeof e&&"number"==typeof n&&g.forEach(function(t){var i,a,c=t.gradientStops,s=t.getPoints,p={width:e,height:n,thickness:r},l=(i=o.ctx).createLinearGradient.apply(i,(0,t.getGradientCoords)(p));c.forEach(function(t){return l.addColorStop(t.stop,t.color)});var h=s(p),d=h[0],f=h.slice(1);o.ctx.beginPath(),(a=o.ctx).moveTo.apply(a,d),f.forEach(function(t){var e;return(e=o.ctx).lineTo.apply(e,t)}),o.ctx.closePath(),o.ctx.fillStyle=l,o.ctx.fill()})},c(o,n)}return a(e,t),e.prototype.componentDidMount=function(){this.draw()},e.prototype.componentDidUpdate=function(t){this.props.width===t.width&&this.props.height===t.height||f(this.canvas,this.ctx,this.props.width,this.props.height),this.draw()},e.prototype.render=function(){var t=this.props,e=t.width,n=t.height,r=t.children;return o.createElement("div",{style:m.wrapper(this.props)},o.createElement("div",{style:m.childWrapper()},r),o.createElement("canvas",{width:e,height:n,style:m.canvas({width:e,height:n}),ref:this.handleRef}))},e}(e.PureComponent);v.defaultProps={thickness:7};var m={wrapper:function(t){return{display:"inline-block",position:"relative",padding:t.thickness}},childWrapper:function(){return{position:"relative",zIndex:3}},canvas:function(t){return{position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0}}},b=function(t){function e(){return r(this,e),c(this,t.apply(this,arguments))}return a(e,t),e.prototype.render=function(){var t=this.props,e=t.size,n=t.backgroundColor,r=t.padding,i=t.segmentThickness,a=t.segmentSpacing,c=t.segmentActiveColor,s=t.segmentInactiveColor,p=t.digitSpacing,l=t.withBorder,d=t.borderThickness,f=t.withGlow,u=t.glowSize,g=t.glowStrength,m=e,b=m*(.5*(1+i/e)),y=function(t,e,n){if((3>=arguments.length||void 0===arguments[3]||arguments[3])&&"function"==typeof String.prototype.padStart)return t.padStart(e,n);if(t.length>=e)return t;for(var o=e-t.length,r="",i=0;o>i;i++)r=""+n+r;return""+r+t}(""+t.hits,t.minLength,"0").split(""),k=b*y.length+p*(y.length-1),x=f&&g>0,C=o.createElement("div",{style:w.wrapper()},o.createElement("div",{style:w.counter(n,r,k)},y.map(function(t,e){return o.createElement(h,{key:e,value:+t,width:b,height:m,segmentThickness:i,segmentSpacing:a,segmentActiveColor:c,segmentInactiveColor:s})})),x&&o.createElement("div",{style:w.glow({strength:g,color:c,size:u})}));return l?o.createElement(v,{width:k+2*r+2*d,height:m+2*r+2*d,thickness:d,glowColor:c,glowStrength:g},C):C},e}(e.PureComponent);b.defaultProps={minLength:4,size:40,padding:4,digitSpacing:3,segmentThickness:4,segmentSpacing:.5,segmentActiveColor:"#76FF03",segmentInactiveColor:"#315324",backgroundColor:"#222222",withBorder:!0,borderThickness:7,withGlow:!1,glowSize:2,glowStrength:.4};var w={wrapper:function(){return{position:"relative",display:"inline-block"}},counter:function(t,e,n){return{position:"relative",zIndex:2,display:"flex",justifyContent:"space-between",width:n,backgroundColor:t,padding:e,boxSizing:"content-box"}},withBorderWrapper:function(t){return{position:"relative",display:"inline-block",padding:t,background:"#CCC"}},counterWrapper:function(){return{position:"relative",zIndex:1,boxSizing:"content-box"}},glow:function(t){var e=t.size;return{position:"absolute",zIndex:1,top:-e,left:-e,right:-e,bottom:-e,background:t.color,filter:"blur("+e+"px)",opacity:t.strength}}};t.default=b,t.RetroBorder=v,Object.defineProperty(t,"__esModule",{value:!0})});
